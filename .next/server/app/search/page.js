"use strict";(()=>{var e={};e.id=797,e.ids=[797],e.modules={53524:e=>{e.exports=require("@prisma/client")},72934:e=>{e.exports=require("next/dist/client/components/action-async-storage.external.js")},55403:e=>{e.exports=require("next/dist/client/components/request-async-storage.external")},54580:e=>{e.exports=require("next/dist/client/components/request-async-storage.external.js")},94749:e=>{e.exports=require("next/dist/client/components/static-generation-async-storage.external")},45869:e=>{e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},39491:e=>{e.exports=require("assert")},82361:e=>{e.exports=require("events")},57147:e=>{e.exports=require("fs")},13685:e=>{e.exports=require("http")},95687:e=>{e.exports=require("https")},22037:e=>{e.exports=require("os")},71017:e=>{e.exports=require("path")},12781:e=>{e.exports=require("stream")},76224:e=>{e.exports=require("tty")},57310:e=>{e.exports=require("url")},73837:e=>{e.exports=require("util")},59796:e=>{e.exports=require("zlib")},16471:(e,r,s)=>{s.r(r),s.d(r,{GlobalError:()=>n.a,__next_app__:()=>u,originalPathname:()=>m,pages:()=>d,routeModule:()=>x,tree:()=>o});var a=s(71361),t=s(16132),i=s(37284),n=s.n(i),l=s(32564),c={};for(let e in l)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(c[e]=()=>l[e]);s.d(r,c);let o=["",{children:["search",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,95058)),"/Users/diegosolerolguin/Documents/programming/udemy/udemy/app/search/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,40067)),"/Users/diegosolerolguin/Documents/programming/udemy/udemy/app/layout.tsx"],loading:[()=>Promise.resolve().then(s.bind(s,88734)),"/Users/diegosolerolguin/Documents/programming/udemy/udemy/app/loading.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,9291,23)),"next/dist/client/components/not-found-error"]}],d=["/Users/diegosolerolguin/Documents/programming/udemy/udemy/app/search/page.tsx"],m="/search/page",u={require:s,loadChunk:()=>Promise.resolve()},x=new a.AppPageRouteModule({definition:{kind:t.x.APP_PAGE,page:"/search/page",pathname:"/search",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:o}})},95058:(e,r,s)=>{s.r(r),s.d(r,{default:()=>Search});var a=s(4656),t=s(96109);function Header(){return a.jsx("div",{className:"bg-gradient-to-r to-[#5f6984] from-[#0f1f47] p-2",children:a.jsx(t.ZP,{})})}var i=s(53524),n=s(24353),l=s.n(n);function SearchSideBar({locations:e,cuisines:r,searchParams:s}){let t=[{price:i.PRICE.CHEAP,label:"$",className:"border w-full text-reg text-center font-light rounded-l p-2"},{price:i.PRICE.REGULAR,label:"$$",className:"border w-full text-reg text-center font-light p-2"},{price:i.PRICE.EXPENSIVE,label:"$$$",className:"border w-full text-reg text-center font-light rounded-r p-2 "}];return(0,a.jsxs)("div",{className:"w-1/5",children:[(0,a.jsxs)("div",{className:"border-b pb-4 flex flex-col",children:[a.jsx("h1",{className:"mb-2",children:"Region"}),e.map(e=>a.jsx(l(),{href:{pathname:"/search",query:{...s,city:e.name}},className:"font-light text-reg capitalize",children:e.name},e.id))]}),(0,a.jsxs)("div",{className:"border-b pb-4 mt- flex flex-col",children:[a.jsx("h1",{className:"mb-2",children:"Cuisine"}),r.map(e=>a.jsx(l(),{href:{pathname:"/search",query:{...s,cuisine:e.name}},className:"font-light text-reg capitalize",children:e.name},e.id))]}),(0,a.jsxs)("div",{className:"mt-3 pb-4",children:[a.jsx("h1",{className:"mb-2",children:"Price"}),a.jsx("div",{className:"flex",children:t.map(({price:e,label:r,className:t})=>a.jsx(l(),{href:{pathname:"/search",query:{...s,price:e}},className:t,children:r}))})]})]})}var c=s(5250),o=s(40639),d=s(70554);function RestaurantCard({restaurant:e}){return(0,a.jsxs)("div",{className:"border-b flex pb-5 ml-4",children:[a.jsx("img",{src:e.main_image,alt:"",className:"w-44 h-36 rounded"}),(0,a.jsxs)("div",{className:"pl-5",children:[a.jsx("h2",{className:"text-3xl",children:e.name}),(0,a.jsxs)("div",{className:"flex items-start",children:[a.jsx("div",{className:"flex mb-2",children:a.jsx(d.Z,{reviews:e.reviews})}),a.jsx("p",{className:"ml-2-text-sm",children:(()=>{let r=(0,o.v)(e.reviews);return r>4?"Awesome":r<=4&&r>3?"Good":r<=3&&r>0?"Average":void 0})()})]}),a.jsx("div",{className:"mb-9",children:(0,a.jsxs)("div",{className:"font-light flex text-reg",children:[a.jsx(c.Z,{price:e.price}),a.jsx("p",{className:"mr-4 capitalize",children:e.cuisine.name}),a.jsx("p",{className:"mr-4 capitalize",children:e.location.name})]})}),a.jsx("div",{className:"text-red-600",children:a.jsx(l(),{href:`/restaurant/${e.slug}`,children:"View more information"})})]})]})}let m=new i.PrismaClient,fetchRestaurantByCity=e=>{let r={};if(e.city){let s={name:{equals:e.city.toLowerCase()}};r.location=s}if(e.cuisine){let s={name:{equals:e.cuisine.toLowerCase()}};r.cuisine=s}if(e.price){let s={equals:e.price};r.price=s}return m.restaurant.findMany({where:r,select:{id:!0,name:!0,main_image:!0,price:!0,cuisine:!0,location:!0,slug:!0,reviews:!0}})},fetchLocations=async()=>m.location.findMany(),fetchCuisines=async()=>m.cuisine.findMany();async function Search({searchParams:e}){let r=await fetchRestaurantByCity(e),s=await fetchLocations(),t=await fetchCuisines();return(0,a.jsxs)(a.Fragment,{children:[a.jsx(Header,{}),(0,a.jsxs)("div",{className:"flex py-4 m-auto w-2/3 justify-between items-start",children:[a.jsx(SearchSideBar,{locations:s,cuisines:t,searchParams:e}),a.jsx("div",{className:"w-5/6",children:r.length?a.jsx(a.Fragment,{children:r.map(e=>a.jsx(RestaurantCard,{restaurant:e},e.id))}):a.jsx("p",{className:"",children:"Sorry, we found no restaurants in this area"})})]})]})}}};var r=require("../../webpack-runtime.js");r.C(e);var __webpack_exec__=e=>r(r.s=e),s=r.X(0,[977,69,639,918,917,303],()=>__webpack_exec__(16471));module.exports=s})();